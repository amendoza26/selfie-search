<div class="m-[10px] space-y-2">
  <div style="display: flex; justify-content: space-between;">
    <div class="text-3xl text-primary font-extrabold">Reportería de Mediciones</div>
  </div>
  <div class="flex items-center space-x-3 bg-white p-5 rounded-[22px]">
    <div class="flex flex-col">
      <mat-label>Fecha desde</mat-label>
      <mat-form-field appearance="outline">
        <input matInput [matDatepicker]="picker1" [(ngModel)]="dateFrom">
        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>
    </div>

    <div class="flex flex-col">
      <mat-label>Fecha hasta</mat-label>
      <mat-form-field appearance="outline" >
        <input matInput [matDatepicker]="picker2" [(ngModel)]="dateTo">
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
      </mat-form-field>
    </div>

    <div class="flex flex-col">
      <mat-label>Buscar cliente</mat-label>
      <mat-form-field appearance="outline">
        <input
          type="text"
          matInput
          [formControl]="clienteControl"
          [matAutocomplete]="autoCliente"
          placeholder="Escribe el nombre del cliente...">
        <!-- <button
          *ngIf="clienteControl.value"
          matSuffix
          mat-icon-button
          (click)="clearClienteFilter()"
          aria-label="Limpiar">
          <mat-icon>close</mat-icon>
        </button> -->
        <mat-autocomplete
          #autoCliente="matAutocomplete"
          (optionSelected)="onClienteSelected($event.option.value)">
          <mat-option *ngFor="let cliente of filteredClientes | async" [value]="cliente">
            {{ cliente }}
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </div>
    <button (click)="applyDateRangeFilter()">Buscar</button>
  </div>

  <!-- tabla  -->
  <div class="">

    <div class="flex flex-col">
      <mat-label>Filtrar</mat-label>
      <mat-form-field appearance="outline" style="width: 30%">
        <input matInput (keyup)="applyFilter($event)" placeholder="Buscar...">
      </mat-form-field>
    </div>

    <div style="overflow: absolute;">
      <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8" style="width: 100%;">
        <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>
            {{ columnHeaders[column] }}
          </th>

          <td mat-cell *matCellDef="let element" style="font-size:12px">
            {{ column === 'med_fechreg' ? formatDateToLocal(element[column]) : element[column] }}
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </div>

    <mat-paginator
      [pageSizeOptions]="[10, 25, 50, 100]"
      [pageSize]="10"
      showFirstLastButtons
      aria-label="Seleccionar página">
    </mat-paginator>

  </div>
</div>

